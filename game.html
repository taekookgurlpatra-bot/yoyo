<script>
let score = 0;
const targetScore = 15;

const gameArea = document.getElementById("gameArea");
const catcher = document.getElementById("catcher");
const scoreText = document.getElementById("score");

document.addEventListener("mousemove", (e) => {
    let x = e.clientX;
    catcher.style.left = (x - 50) + "px";
});

function createHeart() {
    const heart = document.createElement("div");
    heart.classList.add("heart");
    
    heart.style.left = Math.random() * (window.innerWidth - 30) + "px";
    heart.style.top = "-30px";
    
    gameArea.appendChild(heart);

    let fallSpeed = 3 + Math.random() * 2;

    const fall = setInterval(() => {
        let heartTop = heart.offsetTop;
        heart.style.top = heartTop + fallSpeed + "px";

        // COLLISION DETECTION
        const heartRect = heart.getBoundingClientRect();
        const catcherRect = catcher.getBoundingClientRect();

        if (
            heartRect.bottom >= catcherRect.top &&
            heartRect.left <= catcherRect.right &&
            heartRect.right >= catcherRect.left
        ) {
            score++;
            scoreText.innerText = "Hearts Caught: " + score;
            heart.remove();
            clearInterval(fall);

            if (score >= targetScore) {
                window.location.href = "wish.html";
            }
        }

        // Remove heart if missed
        if (heartTop > window.innerHeight) {
            heart.remove();
            clearInterval(fall);
        }

    }, 20);
}

// Create hearts continuously
setInterval(createHeart, 800);
</script>

<script>

let score = 0;
const targetScore = 15;

const gameArea = document.getElementById("gameArea");
const catcher = document.getElementById("catcher");
const scoreText = document.getElementById("score");

// Move catcher with mouse
document.addEventListener("mousemove", (e) => {
    catcher.style.left = (e.clientX - 60) + "px";
});

// Move catcher with phone touch
document.addEventListener("touchmove", (e) => {
    catcher.style.left = (e.touches[0].clientX - 60) + "px";
});

function createHeart() {

    const heart = document.createElement("div");
    heart.innerHTML = "❤️";
    heart.classList.add("heart");

    heart.style.left = Math.random() * (window.innerWidth - 60) + "px";
    heart.style.top = "-60px";

    gameArea.appendChild(heart);

    let fallSpeed = 2 + Math.random(); // slower falling

    const fall = setInterval(() => {

        heart.style.top = heart.offsetTop + fallSpeed + "px";

        const heartRect = heart.getBoundingClientRect();
        const catcherRect = catcher.getBoundingClientRect();

        // Improved collision detection
        if (
            heartRect.bottom >= catcherRect.top &&
            heartRect.top <= catcherRect.bottom &&
            heartRect.right >= catcherRect.left &&
            heartRect.left <= catcherRect.right
        ) {
            score++;
            scoreText.innerText = "Hearts Caught: " + score;

            heart.remove();
            clearInterval(fall);

            if (score >= targetScore) {
                window.location.href = "wish.html";
            }
        }

        // Remove if missed
        if (heart.offsetTop > window.innerHeight) {
            heart.remove();
            clearInterval(fall);
        }

    }, 20);
}

// Create hearts every second
setInterval(createHeart, 1000);

</script>
